# Задание 11 (Пишем скрипт)

Bash скрипт `log_processing.sh` раз в час обрабатывает логфайл Nginx `/var/log/nginx/access.log` и отправляет отчёт по электронной почте. 

Использование `/tmp/.lock` файла в качестве флага выполнения скрипта, передотвращает запуск нескольких копий скрипта одновременно.

**Отчёт содержит**:

- Обрабатываемый временной диапазон в теме письма;

- Список десяти IP адресов с наибольшим количеством запросов, с указанием количества запросов c момента последнего запуска скрипта;

- Список десяти запрашиваемых URL с наибольшим количеством запросов, с указанием количества запросов c момента последнего запуска скрипта;

- Ошибки веб-сервера/приложения c момента последнего запуска (коды отвева HTTP 500 - 599);

- Список всех кодов HTTP ответа с указанием их количества с момента последнего запуска скрипта.

Email адрес получателя указывается в переменной EMAIL (значение по умолчанию `admin@test.test`).
Также можно изменить email адрес отправителя в переменной SENDER (значение по умолчанию `email_from@test.test`).



Vagrantfile разворачивает виртуальную машину.

Далее на этой виртуальной машине последовательно происходит:

- Установка Nginx и sendmail.
- Настройка работы cron для запуска скрипта `log_processing.sh` каждый час.

Для доступа к Nginx пробрасывается порт 8080 (http://localhost:8080/)

Лог выполнения указанных операций отображается при разворачивании виртуальной машины командой:

```bash
$ vagrant up
```